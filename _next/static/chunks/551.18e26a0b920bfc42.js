"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[551],{551:function(a,b,c){c.r(b),c.d(b,{default:function(){return g}});var d=c(2540),e=c(7294);function f({color:a,value:b,align:c,className:e,children:f}){return d.j.jsxs("div",{className:(0,d.n)("funnel-bar",`funnel-bar-${c}`,e),children:[d.j.jsx("div",{className:"funnel-bar-value",style:{backgroundColor:a,width:b+"%"}}),d.j.jsx("div",{className:"funnel-bar-label",children:f})]})}function g({data:a,options:b}){let c=(0,e.useMemo)(()=>(function(a,b){if(0===a.length||!b.stepCol.colName||!b.valueCol.colName)return[];a=[...a],b.sortKeyCol.colName&&(a=d.l.sortBy(a,b.sortKeyCol.colName)),b.sortKeyCol.reverse&&(a=a.reverse());let c=d.l.map(a,a=>({step:function(a){if(d.d.isDayjs(a)){let b=d.v.dateTimeFormat||"DD/MM/YYYY HH:mm";return a.format(b)}return d.l.toString(a)}(a[b.stepCol.colName]),value:parseFloat(a[b.valueCol.colName])||0})),e=d.l.maxBy(c,a=>a.value).value;return c.forEach((a,b)=>{a.pctMax=a.value/e*100,a.pctPrevious=0===b||a.value===c[b-1].value?100:a.value/c[b-1].value*100}),c.slice(0,b.itemsLimit)})(a.rows,b),[a,b]),g=(0,e.useMemo)(()=>Math.trunc(Math.random()*Number.MAX_SAFE_INTEGER).toString(36)+":",[c]),h=(0,e.useMemo)(()=>(0,d.e)(b.numberFormat),[b.numberFormat]),i=(0,e.useMemo)(()=>{let a=(0,d.e)(b.percentFormat);return c=>c<b.percentValuesRange.min?`<${a(b.percentValuesRange.min)}`:c>b.percentValuesRange.max?`>${a(b.percentValuesRange.max)}`:a(c)},[b.percentFormat,b.percentValuesRange]),j=(0,e.useMemo)(()=>{if(0===c.length)return[];let a=d.l.maxBy(c,a=>isFinite(a.pctPrevious)?a.pctPrevious:0).pctPrevious;return[{title:b.stepCol.displayAs,dataIndex:"step",width:"25%",className:"text-ellipsis",render:a=>d.j.jsx(d.T,{title:a,mouseEnterDelay:0,mouseLeaveDelay:0,children:a})},{title:b.valueCol.displayAs,dataIndex:"value",width:"45%",align:"center",render:(a,b)=>d.j.jsx(f,{align:"center",color:d.G.Cyan,value:b.pctMax,children:h(a)})},{title:"% Max",dataIndex:"pctMax",width:"15%",align:"center",render:a=>i(a)},{title:"% Previous",dataIndex:"pctPrevious",width:"15%",align:"center",render:b=>d.j.jsx(f,{className:"funnel-percent-column",value:b/a*100,children:i(b)})}]},[b.stepCol.displayAs,b.valueCol.displayAs,c,h,i]);return 0===c.length?null:d.j.jsx("div",{className:"funnel-visualization-container",children:d.j.jsx(d.H,{columns:j,dataSource:c,rowKey:(a,b)=>g+b,pagination:!1})})}f.defaultProps={color:"#dadada",value:0,align:"left",className:null,children:null},g.propTypes=d.R}}])