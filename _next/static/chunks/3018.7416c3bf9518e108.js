"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3018,9799],{3018:function(a,b,c){c.r(b),c.d(b,{default:function(){return l}});var d=c(2540),e=c(7294),f=c(3935);c(7881);var g=c(9799);function h(a,b,c){let e=a.properties[c];if(d.l.isString(e)&&d.l.isObject(b[e]))return b[e].value}function i({items:a,alignText:b}){return d.j.jsx("div",{className:"choropleth-visualization-legend",children:d.l.map(a,(a,c)=>d.j.jsxs("div",{className:"legend-item",children:[d.j.jsx(d.k.Swatch,{color:a.color}),d.j.jsx("div",{className:`legend-item-text text-${b}`,children:a.text})]},`legend${c}`))})}i.defaultProps={items:[],alignText:"left"};let j=d.L.Control.extend({options:{position:"topright"},onAdd(){let a=document.createElement("div");return a.className="leaflet-bar leaflet-custom-toolbar",a.style.background="#fff",a.style.backgroundClip="padding-box",a},onRemove(){f.unmountComponentAtNode(this.getContainer())}});function k(a,b){return a&&(a=d.L.latLngBounds(a[0],a[1])).isValid()?a:b&&b.isValid()?b:null}function l({data:a,options:b,onOptionsChange:c}){let[l,m]=(0,e.useState)(null),[n]=(0,d.u)(b.mapType),o=(0,e.useRef)();o.current=c?a=>c({...b,bounds:a}):d.l.noop;let p=function(a,b){let c=(0,e.useRef)(),f=(0,e.useMemo)(a,b);return d.l.isEqual(f,c.current)||(c.current=f),c.current}(()=>d.l.omit(b,["bounds"]),[b]),[q,r]=(0,e.useState)(null);return(0,e.useEffect)(()=>{if(l){let a=function(a,b){let c=d.L.map(a,{center:[0,0],zoom:1,zoomSnap:0,scrollWheelZoom:!1,maxBoundsViscosity:1,attributionControl:!1,fullscreenControl:!0}),e=null,l=new j,m=!1,n=()=>{!function(){if(d.l.isFunction(b)){let a=c.getBounds();b([[a._southWest.lat,a._southWest.lng],[a._northEast.lat,a._northEast.lng]])}}()};c.on("focus",()=>{m=!0,c.on("moveend",n)}),c.on("blur",()=>{c.off("moveend",n),m=!1});let o=(0,g.o)(a,()=>{c.invalidateSize(!1)});return{updateLayers:function(a,b,g){if(c.eachLayer(a=>c.removeLayer(a)),c.removeControl(l),!d.l.isObject(a)||!d.l.isArray(a.features)){e=null,c.setMaxBounds(null);return}let{limits:j,colors:m,legend:n}=function(a,b,c){let e=d.l.uniq(d.l.filter(d.l.map(a,a=>h(a,b,c.targetField)),d.l.isFinite));if(0===e.length)return{limits:[],colors:[],legend:[]};let f=Math.min(e.length,c.steps);if(1===f)return{limits:e,colors:[c.colors.max],legend:[{color:c.colors.max,limit:d.l.first(e)}]};let g=d.i.limits(e,c.clusteringMode,f-1),i=d.i.scale([c.colors.min,c.colors.max]).colors(g.length),j=d.l.map(i,(a,b)=>({color:a,limit:g[b]})).reverse();return{limits:g,colors:i,legend:j}}(a.features,b,g),o=function(a,b){let c=(0,d.e)(a);return a=>d.l.isFinite(a)?c(a):b}(g.valueFormat,g.noValuePlaceholder);e=d.L.geoJSON(a,{onEachFeature(a,c){!function({feature:a,layer:b,data:c,options:e,limits:f,colors:g,formatValue:i}){let j=h(a,c,e.targetField),k=i(j),l=function(a,b,c,e){let f={};d.l.each(a.properties,(a,b)=>{f["@@"+b]=a}),f["@@value"]=b;let g=c[a.properties[e]]||{};return d.l.extend(f,g.item)}(a,k,c,e.targetField),m=function(a,b,c,e){if(d.l.isFinite(a)){for(let f=0;f<b.length;f+=1)if(a<=b[f])return c[f]}return e}(j,f,g,e.colors.noValue);b.setStyle({color:e.colors.borders,weight:1,fillColor:m,fillOpacity:1}),e.tooltip.enabled&&b.bindTooltip((0,d.s)((0,d.f)(e.tooltip.template,l)),{sticky:!0}),e.popup.enabled&&b.bindPopup((0,d.s)((0,d.f)(e.popup.template,l))),b.on("mouseover",()=>{var a;b.setStyle({weight:2,fillColor:(a=m,(0,d.i)(a).darken().hex())})}),b.on("mouseout",()=>{b.setStyle({weight:1,fillColor:m})})}({feature:a,layer:c,data:b,options:g,limits:j,colors:m,formatValue:o})}}).addTo(c);let p=e.getBounds(),q=k(g.bounds,p);c.fitBounds(q,{animate:!1,duration:0}),c.options.maxBounds=p,c.panInsideBounds(p,{animate:!1,duration:0}),g.legend.visible&&n.length>0&&(l.setPosition(g.legend.position.replace("-","")),c.addControl(l),f.render(d.j.jsx(i,{items:d.l.map(n,a=>({...a,text:o(a.limit)})),alignText:g.legend.alignText}),l.getContainer()))},updateBounds:function(a){if(!m){let b=e?e.getBounds():c.getBounds();(a=k(a,b))&&c.fitBounds(a,{animate:!1,duration:0})}},destroy(){o(),c.removeControl(l),c.remove()}}}(l,(...a)=>o.current(...a));return r(a),()=>{a.destroy()}}},[l]),(0,e.useEffect)(()=>{q&&q.updateLayers(n,function(a,b,c){if(!b||!c)return{};let e={};return d.l.each(a,a=>{if(a[b]){let f=parseFloat(a[c]);e[a[b]]={code:a[b],value:d.l.isFinite(f)?f:void 0,item:a}}}),e}(a.rows,p.keyColumn,p.valueColumn),b)},[q,n,a.rows,p]),(0,e.useEffect)(()=>{q&&q.updateBounds(b.bounds)},[q,b,c]),d.j.jsx("div",{className:"map-visualization-container",style:{background:b.colors.background},ref:m})}l.propTypes=d.R},7881:function(){L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{false:"View Fullscreen",true:"Exit Fullscreen"}},onAdd:function(a){var b=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=L.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",b),this.link.href="#",this._map=a,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),L.DomEvent.on(this.link,"click",this._click,this),b},_click:function(a){L.DomEvent.stopPropagation(a),L.DomEvent.preventDefault(a),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}}),L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(a){var b=this.getContainer();this.isFullscreen()?a&&a.pseudoFullscreen?this._disablePseudoFullscreen(b):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(b):a&&a.pseudoFullscreen?this._enablePseudoFullscreen(b):b.requestFullscreen?b.requestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullscreen?b.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):b.msRequestFullscreen?b.msRequestFullscreen():this._enablePseudoFullscreen(b)},_enablePseudoFullscreen:function(a){L.DomUtil.addClass(a,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(a){L.DomUtil.removeClass(a,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(a){this._isFullscreen=a;var b=this.getContainer();a?L.DomUtil.addClass(b,"leaflet-fullscreen-on"):L.DomUtil.removeClass(b,"leaflet-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(a){var b=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;b!==this.getContainer()||this._isFullscreen?b!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))}}),L.Map.mergeOptions({fullscreenControl:!1}),L.Map.addInitHook(function(){if(this.options.fullscreenControl&&(this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl)),"onfullscreenchange"in document?a="fullscreenchange":"onmozfullscreenchange"in document?a="mozfullscreenchange":"onwebkitfullscreenchange"in document?a="webkitfullscreenchange":"onmsfullscreenchange"in document&&(a="MSFullscreenChange"),a){var a,b=L.bind(this._onFullscreenChange,this);this.whenReady(function(){L.DomEvent.on(document,a,b)}),this.on("unload",function(){L.DomEvent.off(document,a,b)})}}),L.control.fullscreen=function(a){return new L.Control.Fullscreen(a)}},9799:function(a,b,c){c.d(b,{o:function(){return f}});let d=new Map;function e(){d.size>0&&(d.forEach((a,b)=>{let c=b.getBoundingClientRect(),d=Math.round(10*c.width),e=Math.round(10*c.height);(a.width!==d||a.height!==e)&&(a.width=d,a.height=e,a.callback(b))}),setTimeout(e,100))}function f(a,b){if(a&&!d.has(a)){let c=0===d.size;return d.set(a,{callback:b}),c&&e(),()=>d.delete(a)}return()=>{}}}}])