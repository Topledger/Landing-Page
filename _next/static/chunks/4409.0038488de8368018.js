"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4409],{84409:function(a,b,c){c.r(b),c.d(b,{default:function(){return m}});var d=c(99476),e=c(67294),f=c(94354),g=c.n(f);c(73935),c(15078),c(97762),(0,d.s)("/* --------------------------------------------------------\n    Colors\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Font\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Borders\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Typography\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Table\n-----------------------------------------------------------*/\n.table-visualization-container {\n  /* START table x scroll */\n  /* END */\n}\n.table-visualization-container .ant-pagination.ant-table-pagination {\n  float: none;\n  display: block;\n  text-align: center;\n  margin-bottom: 0;\n}\n.table-visualization-container .ant-table {\n  overflow-x: auto;\n}\n.table-visualization-container .table-fixed-header table {\n  border-top: 0;\n}\n.table-visualization-container .table-fixed-header table th:not(.table-visualization-search) {\n  position: sticky !important;\n  left: 0;\n  top: 0;\n  border-top: 0;\n  z-index: 1;\n  background: #fafafa !important;\n}\n.table-visualization-container table {\n  border-top: 1px solid #e8e8e8;\n  border-bottom: 0;\n}\n.table-visualization-container table .display-as-number,\n.table-visualization-container table .display-as-boolean,\n.table-visualization-container table .display-as-datetime,\n.table-visualization-container table .display-as-image {\n  width: 1%;\n  white-space: nowrap;\n}\n.table-visualization-container table .table-visualization-spacer {\n  padding-left: 0;\n  padding-right: 0;\n}\n.table-visualization-container table .table-visualization-spacer > div:before {\n  content: none !important;\n}\n.table-visualization-container table tbody tr:last-child td {\n  border-bottom: 0;\n}\n.table-visualization-container table thead .ant-table-column-sorter-up,\n.table-visualization-container table thead .ant-table-column-sorter-down {\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n.table-visualization-container table thead:hover .ant-table-column-sorter-up,\n.table-visualization-container table thead .table-visualization-column-is-sorted .ant-table-column-sorter-up,\n.table-visualization-container table thead:hover .ant-table-column-sorter-down,\n.table-visualization-container table thead .table-visualization-column-is-sorted .ant-table-column-sorter-down {\n  opacity: 1;\n}\n.table-visualization-container table thead th {\n  white-space: nowrap;\n}\n.table-visualization-container table thead th.table-visualization-search {\n  padding-bottom: 0;\n}\n.table-visualization-container table thead th.table-visualization-search .ant-table-header-column {\n  display: block;\n}\n.table-visualization-container table thead th .ant-input-search {\n  font-weight: normal;\n}\n.table-visualization-container table thead th .ant-input-search .ant-input-suffix .anticon {\n  cursor: auto;\n}\n.table-visualization-container table thead th.ant-table-column-has-actions.ant-table-column-has-sorters {\n  padding-right: 3px;\n}\n.table-visualization-container table thead th .table-visualization-heading {\n  display: inline-block;\n  max-width: 200px;\n  vertical-align: middle;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.table-visualization-container table thead th .table-visualization-heading[data-sort-column-index]:before {\n  content: attr(data-sort-column-index);\n  display: inline-block;\n  vertical-align: middle;\n  min-width: 12px;\n  height: 12px;\n  font-size: 36px/4;\n  border-radius: 12px / 2;\n  background: #c0c0c0;\n  text-align: center;\n  line-height: 12px;\n  color: #fff;\n  padding: 0 12px/4;\n  margin: 0 5px 0 0;\n}\n.dashboard-widget-wrapper:not(.widget-auto-height-enabled) .table-visualization-container,\n.query-fixed-layout .table-visualization-container {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n.dashboard-widget-wrapper:not(.widget-auto-height-enabled) .table-visualization-container div,\n.query-fixed-layout .table-visualization-container div {\n  height: inherit;\n}\n.dashboard-widget-wrapper:not(.widget-auto-height-enabled) .table-visualization-container .ant-spin-container,\n.query-fixed-layout .table-visualization-container .ant-spin-container {\n  display: flex;\n  flex-direction: column;\n}\n.dashboard-widget-wrapper:not(.widget-auto-height-enabled) .table-visualization-container .ant-spin-container .ant-table,\n.query-fixed-layout .table-visualization-container .ant-spin-container .ant-table {\n  flex-grow: 1;\n}\n.table-visualization-search-info-content {\n  max-width: 400px;\n}\n.table-visualization-search-info-icon {\n  margin: 0 5px 0 0;\n}\n.table-visualization-search-info-icon:not(:hover):not(:active) {\n  color: rgba(0, 0, 0, 0.45);\n}\n");var h=["searchColumns"];function i(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:", ";return d.l.reduce(a,function(a,c,d){return d>0&&a.push(b),a.push(c),a},[])}function j(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=b.limit,e=void 0===c?1/0:c,f=b.renderColumn,g=void 0===f?function(a){return a.title}:f,h=d.l.map(a.slice(0,e),function(a){return g(a)}),j=d.l.map(a.slice(e),function(a){return a.title});return j.length>0?[].concat((0,d.j)(i(h)),[" and ".concat(j.length," others")]):h.length>1?[].concat((0,d.j)(i(d.l.initial(h))),[" and ",d.l.last(h)]):h}function k(a){var b=a.searchColumns;return e.createElement(d.V,{arrowPointAtCenter:!0,placement:"topRight",content:e.createElement("div",{className:"table-visualization-search-info-content"},"Search ",j(b,{renderColumn:function(a){return e.createElement("code",{key:a.name},a.title)}}))},e.createElement(g(),{className:"table-visualization-search-info-icon"}))}function l(a){var b=a.searchColumns,c=(0,d.m)(a,h);return b.length<=0?null:e.createElement(d.U.Search,(0,d.b)((0,d.b)({},c),{},{placeholder:"Search ".concat(j(b,{limit:3}).join(""),"..."),suffix:b.length>3?e.createElement(k,{searchColumns:b}):null}))}function m(a){var b=a.options,c=a.data,f=(0,e.useState)(""),g=(0,d._)(f,2),h=g[0],i=g[1],j=(0,e.useState)([]),k=(0,d._)(j,2),m=k[0],n=k[1],o=(0,e.useMemo)(function(){return d.l.filter(b.columns,"allowSearch")},[b.columns]),p=(0,e.useMemo)(function(){var a=o.length>0?e.createElement(l,{searchColumns:o,onChange:function(a){return i(a.target.value)}}):null;return function(a,b,c,f){a=d.l.filter(a,"visible"),a=d.l.sortBy(a,"order");var g,h,i=c.length>1,j=(g=c,h={},d.l.each(g,function(a,b){var c=a.name,d=a.direction;h[c]={direction:d,index:b+1}}),h),k=d.l.map(a,function(a){var b=j[a.name]&&"ascend"===j[a.name].direction,g=j[a.name]&&"descend"===j[a.name].direction,h=i&&j[a.name]?j[a.name].index:null,k={key:a.name,dataIndex:"record[".concat(JSON.stringify(a.name),"]"),align:a.alignContent,sorter:{multiple:1},sortOrder:d.l.get(j,[a.name,"direction"],null),title:e.createElement(e.Fragment,null,a.description&&e.createElement("span",{style:{paddingRight:5}},e.createElement(d.r,{placement:"top",title:a.description},e.createElement("div",{className:"table-visualization-heading"},e.createElement("i",{className:"fa fa-info-circle","aria-hidden":"true"})))),e.createElement(d.r,{placement:"top",title:a.title},e.createElement("div",{className:"table-visualization-heading","data-sort-column-index":h},a.title))),onHeaderCell:function(){return{className:(0,d.w)({"table-visualization-column-is-sorted":b||g}),onClick:function(b){return f(function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&& void 0!==arguments[2]&&arguments[2],e=d.l.findIndex(b,function(b){return b.name===a}),f={name:a,direction:"ascend"};return e>=0&&(f.direction=function(a){switch(a){case"ascend":return"descend";case"descend":return null;default:return"ascend"}}(b[e].direction)),c?f.direction?(e>=0?b[e]=f:b.push(f),(0,d.j)(b)):d.l.filter(b,function(b){return b.name!==a}):f.direction?[f]:[]}(a.name,c,b.shiftKey))}}}},l=(0,d.T[a.displayAs])(a);return k.render=function(b,c){return{children:e.createElement(l,{row:c.record}),props:{className:"display-as-".concat(a.displayAs)}}},k});return k.push({key:"###Redash::Visualizations::Table::Spacer###",dataIndex:null,title:"",className:"table-visualization-spacer",render:function(){return""},onHeaderCell:function(){return{className:"table-visualization-spacer"}}}),b&&(k=[{key:"table-search",title:b,onHeaderCell:function(){return{className:"table-visualization-search"}},children:k}]),k}(b.columns,a,m,function(a){n(a),document.getSelection().removeAllRanges()})},[b.columns,o,m]),q=(0,e.useMemo)(function(){var a;return function(a,b){if(0===b.length||0===a.length)return a;var c={ascend:1,descend:-1};return(0,d.j)(a).sort(function(a,e){for(var f,g,h=0;h<b.length;h+=1){if(f=a.record[b[h].name],g=e.record[b[h].name],d.l.isNil(f)||f<g)return -1*c[b[h].direction];if(f>g||d.l.isNil(g))return 1*c[b[h].direction]}return 0})}(function(a,b,c){if(""!==b&&c.length>0){b=b.toUpperCase();var e=d.l.map(c,function(a){var c=(0,d.T[a.displayAs])(a).prepareData;return function(a){var e=c(a).text;return d.l.toString(e).toUpperCase().indexOf(b)>=0}});return d.l.filter(a,function(a){return d.l.some(e,function(b){return b(a.record)})})}return a}((a=c.rows,d.l.map(a,function(a,b){return{key:"record".concat(b),record:a}})),h,o),m)},[c.rows,h,o,m]);return(0,e.useEffect)(function(){n([])},[b.columns,c.columns]),0===c.rows.length?null:e.createElement("div",{className:"table-visualization-container"},e.createElement(d.N,{className:"table-fixed-header","data-percy":"show-scrollbars","data-test":"TableVisualization",columns:p,dataSource:q,pagination:{size:d.l.get(b,"paginationSize",""),position:"bottom",pageSize:b.itemsPerPage,hideOnSinglePage:!0,showSizeChanger:!1},showSorterTooltip:!1}))}l.defaultProps={onChange:function(){}},m.propTypes=d.R}}])