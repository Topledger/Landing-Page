"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3031],{3031:function(a,b,c){c.r(b),c.d(b,{default:function(){return g}});var d=c(4216),e=c(7294);function f(a){var b=a.color,c=a.value,f=a.align,g=a.className,h=a.children;return e.createElement("div",{className:(0,d.w)("funnel-bar","funnel-bar-".concat(f),g)},e.createElement("div",{className:"funnel-bar-value",style:{backgroundColor:b,width:c+"%"}}),e.createElement("div",{className:"funnel-bar-label"},h))}function g(a){var b=a.data,c=a.options,g=(0,e.useMemo)(function(){return function(a,b){if(0===a.length||!b.stepCol.colName||!b.valueCol.colName)return[];a=(0,d.j)(a),b.sortKeyCol.colName&&(a=d.l.sortBy(a,b.sortKeyCol.colName)),b.sortKeyCol.reverse&&(a=a.reverse());var c=d.l.map(a,function(a){return{step:function(a){if(d.d.isDayjs(a)){var b=d.v.dateTimeFormat||"DD/MM/YYYY HH:mm";return a.format(b)}return d.l.toString(a)}(a[b.stepCol.colName]),value:parseFloat(a[b.valueCol.colName])||0}}),e=d.l.maxBy(c,function(a){return a.value}).value;return c.forEach(function(a,b){a.pctMax=a.value/e*100,a.pctPrevious=0===b||a.value===c[b-1].value?100:a.value/c[b-1].value*100}),c.slice(0,b.itemsLimit)}(b.rows,c)},[b,c]),h=(0,e.useMemo)(function(){return Math.trunc(Math.random()*Number.MAX_SAFE_INTEGER).toString(36)+":"},[g]),i=(0,e.useMemo)(function(){return(0,d.h)(c.numberFormat)},[c.numberFormat]),j=(0,e.useMemo)(function(){var a=(0,d.h)(c.percentFormat);return function(b){return b<c.percentValuesRange.min?"<".concat(a(c.percentValuesRange.min)):b>c.percentValuesRange.max?">".concat(a(c.percentValuesRange.max)):a(b)}},[c.percentFormat,c.percentValuesRange]),k=(0,e.useMemo)(function(){if(0===g.length)return[];var a=d.l.maxBy(g,function(a){return isFinite(a.pctPrevious)?a.pctPrevious:0}).pctPrevious;return[{title:c.stepCol.displayAs,dataIndex:"step",width:"25%",className:"text-ellipsis",render:function(a){return e.createElement(d.r,{title:a,mouseEnterDelay:0,mouseLeaveDelay:0},a)}},{title:c.valueCol.displayAs,dataIndex:"value",width:"45%",align:"center",render:function(a,b){return e.createElement(f,{align:"center",color:d.M.Cyan,value:b.pctMax},i(a))}},{title:"% Max",dataIndex:"pctMax",width:"15%",align:"center",render:function(a){return j(a)}},{title:"% Previous",dataIndex:"pctPrevious",width:"15%",align:"center",render:function(b){return e.createElement(f,{className:"funnel-percent-column",value:b/a*100},j(b))}}]},[c.stepCol.displayAs,c.valueCol.displayAs,g,i,j]);return 0===g.length?null:e.createElement("div",{className:"funnel-visualization-container"},e.createElement(d.N,{columns:k,dataSource:g,rowKey:function(a,b){return h+b},pagination:!1}))}c(3935),c(5078),c(7762),(0,d.s)(".funnel-bar {\n  position: relative;\n  height: 30px;\n  line-height: 30px;\n}\n.funnel-bar-left {\n  text-align: left;\n}\n.funnel-bar-center {\n  text-align: center;\n}\n.funnel-bar-right {\n  text-align: right;\n}\n.funnel-bar .funnel-bar-value {\n  display: inline-block;\n  vertical-align: top;\n  height: 30px;\n}\n.funnel-bar .funnel-bar-label {\n  display: inline-block;\n  text-align: center;\n  vertical-align: middle;\n  position: absolute;\n  left: 0;\n  right: 0;\n}\n"),f.defaultProps={color:"#dadada",value:0,align:"left",className:null,children:null},(0,d.s)(".funnel-visualization-container table {\n  min-width: 450px;\n  table-layout: fixed;\n}\n.funnel-visualization-container table tbody tr td {\n  border: none;\n}\n.funnel-visualization-container table tbody tr td.text-ellipsis {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.funnel-visualization-container .step {\n  max-width: 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.funnel-visualization-container .step .step-name {\n  visibility: hidden;\n  width: inherit;\n  padding: 3px 5px;\n  background-color: white;\n  border: 1px solid;\n  border-radius: 3px;\n  position: absolute;\n  z-index: 1;\n  white-space: initial;\n  word-wrap: break-word;\n}\n.funnel-visualization-container .step:hover .step-name {\n  visibility: visible;\n}\n"),g.propTypes=d.R}}])