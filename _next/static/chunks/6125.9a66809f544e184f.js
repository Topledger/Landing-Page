"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6125],{6125:function(a,b,c){c.r(b),c.d(b,{default:function(){return r}});var d=c(67294),e=c(50956),f=c(92929),g=c(47783);c(73935),c(61920),c(97762);var h={weekly:"weeks",daily:"days",monthly:"months"};function i(a){var b={};return e.n.each(a,function(a){var c=(0,e.d)(a.date),d=c.valueOf();b[d]=b[d]||{date:c,total:parseInt(a.total,10)||0,values:{}},b[d].values[a.stage]=parseInt(a.value,10)||null}),e.n.values(b)}(0,e.s)("/* --------------------------------------------------------\n    Colors\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Font\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Borders\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Typography\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Table\n-----------------------------------------------------------*/\n.cohort-visualization-container .cornelius-table {\n  width: 100%;\n}\n.cohort-visualization-container .cornelius-table,\n.cohort-visualization-container .cornelius-table tr,\n.cohort-visualization-container .cornelius-table th,\n.cohort-visualization-container .cornelius-table td {\n  border-color: #f0f0f0;\n}\n.cohort-visualization-container .cornelius-table .cornelius-time,\n.cohort-visualization-container .cornelius-table .cornelius-label,\n.cohort-visualization-container .cornelius-table .cornelius-stage,\n.cohort-visualization-container .cornelius-table .cornelius-people {\n  background-color: rgba(102, 136, 153, 0.03);\n}\n"),(0,e.s)("/* --------------------------------------------------------\n    Colors\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Font\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Borders\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Typography\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Table\n-----------------------------------------------------------*/\n.cornelius-container .cornelius-title {\n  text-align: center;\n  padding-bottom: 10px;\n  font-weight: bold;\n  font-size: 14pt;\n  color: #333;\n  border-collapse: collapse;\n}\n.cornelius-container .cornelius-table {\n  font-size: 9pt;\n  border-spacing: 0;\n  border: 1px solid #e4e4e4;\n  border-collapse: collapse;\n}\n.cornelius-container .cornelius-table th,\n.cornelius-container .cornelius-table td {\n  text-align: center;\n  padding: 10px;\n  border: 1px solid #e4e4e4;\n  color: #333;\n  font-weight: bold;\n}\n.cornelius-container .cornelius-table .cornelius-label {\n  text-align: left;\n}\n.cornelius-container .cornelius-table .cornelius-empty,\n.cornelius-container .cornelius-table .cornelius-percentage,\n.cornelius-container .cornelius-table .cornelius-absolute {\n  font-weight: normal;\n  border: none;\n}\n.cornelius-container .cornelius-table .cornelius-label,\n.cornelius-container .cornelius-table .cornelius-people,\n.cornelius-container .cornelius-table .cornelius-stage {\n  font-weight: bold;\n  color: #333;\n}\n.cornelius-container .cornelius-table .cornelius-percentage.cornelius-white-text,\n.cornelius-container .cornelius-table .cornelius-absolute.cornelius-white-text {\n  text-shadow: 1px 1px 1px #000000;\n}\n");var j={daily:"days",weekly:"weeks",monthly:"months",yearly:"years"},k={daily:"MMMM D, YYYY",weekly:"[Week of] MMM D, YYYY",monthly:"MMMM YYYY",yearly:"YYYY"},l={initialDate:null,timeInterval:"monthly",noValuePlaceholder:"-",rawNumberOnHover:!0,displayAbsoluteValues:!1,initialIntervalNumber:1,maxColumns:1/0,title:null,timeColumnTitle:"Time",peopleColumnTitle:"People",stageColumnTitle:"{{ @ }}",numberFormat:"0,0[.]00",percentFormat:"0.00%",timeLabelFormat:k.monthly,colors:{min:"#ffffff",max:"#041d66",steps:7}};function m(a){return a=(0,f.c)(a),f.c.contrast(a,"#ffffff")<f.c.contrast(a,"#000000")}function n(a,b){return(0,e.f)(a.stageColumnTitle,{"@":a.initialIntervalNumber-1+b})}function o(a){for(var b=a.options,c=a.maxRowLength,e=[],f=1;f<c;f+=1)e.push(d.createElement("th",{key:"col".concat(f),className:"cornelius-stage"},n(b,f)));return d.createElement("tr",null,d.createElement("th",{className:"cornelius-time"},b.timeColumnTitle),d.createElement("th",{className:"cornelius-people"},b.peopleColumnTitle),e)}function p(a){for(var b,c,f,h=a.options,i=a.data,k=a.index,l=a.maxRowLength,n=i[0]||0,o=[],p=1;p<l;p+=1){var q=i[p],r=e.l.isFinite(q/n)?q/n*100:null,s={key:"col".concat(p)};if(e.l.isNil(r))s.className="cornelius-empty",s.children=h.noValuePlaceholder;else{s.className=h.displayAbsoluteValues?"cornelius-absolute":"cornelius-percentage",s.children=h.displayAbsoluteValues?h.formatNumber(q):h.formatPercent(r);var t=h.getColorForValue(r);s.style={backgroundColor:t,color:(0,g.c)(t)},m(s.style.color)&&(s.className+=" cornelius-white-text"),h.rawNumberOnHover&&!h.displayAbsoluteValues&&(s.children=d.createElement(e.o,{title:h.formatNumber(q),mouseEnterDelay:0,mouseLeaveDelay:0},d.createElement("div",null,s.children)))}o.push(d.createElement("td",(0,e._)({},s)))}return d.createElement("tr",null,d.createElement("td",{className:"cornelius-label"},(b=h,c=k,f=j[b.timeInterval],b.initialDate.clone().add(c,f).format(b.timeLabelFormat))),d.createElement("td",{className:"cornelius-people"},h.formatNumber(n)),o)}function q(a){var b=a.data,c=a.options;c=(0,d.useMemo)(function(){var a;return a=c,a=e.l.extend({},l,a,{initialDate:(0,e.d)(a.initialDate),colors:e.l.extend({},l.colors,a.colors)}),e.l.extend(a,{timeLabelFormat:k[a.timeInterval],formatNumber:(0,e.b)(a.numberFormat),formatPercent:(0,e.b)(a.percentFormat),getColorForValue:f.c.scale([a.colors.min,a.colors.max]).mode("hsl").domain([0,100]).classes(a.colors.steps)})},[c]);var g=(0,d.useMemo)(function(){return e.l.min([e.l.max(e.l.map(b,function(a){return a.length}))||0,c.maxColumns+1])},[b,c.maxColumns]);return 0===b.length?null:d.createElement("div",{className:"cornelius-container"},c.title&&d.createElement("div",{className:"cornelius-title"},c.title),d.createElement("table",{className:"cornelius-table"},d.createElement("thead",null,d.createElement(o,{options:c,maxRowLength:g})),d.createElement("tbody",null,e.l.map(b,function(a,b){return d.createElement(p,{key:"row".concat(b),options:c,data:a,index:b,maxRowLength:g})}))))}function r(a){var b=a.data,c=a.options,f=(0,d.useMemo)(function(){return function(a,b){if(x=a,y=b,z=e.n.map(x.columns,function(a){return a.name}),!(x.rows.length>0&&e.n.includes(z,y.dateColumn)&&e.n.includes(z,y.stageColumn)&&e.n.includes(z,y.totalColumn)&&e.n.includes(z,y.valueColumn)))return{data:[],initialDate:null};a=e.n.map(a.rows,function(a){return{date:a[b.dateColumn],stage:parseInt(a[b.stageColumn],10),total:parseFloat(a[b.totalColumn]),value:parseFloat(a[b.valueColumn])}});var c,d,f,g,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=e.n.sortBy(a,function(a){return a.date+a.stage}),C=(0,e.d)(B[0].date).toDate();return A="simple"===b.mode?(c=B,f=(d=b).timeInterval,g=i(c),j=e.n.map(c,function(a){return a.stage}),k=e.n.min(j),l=e.n.max(j),m=null,n=[],e.n.each(g,function(a){if(null!==m)for(var b=Math.abs(m.diff(a.date,h[f]));b>1;)n.push([0]),b-=1;m=a.date;for(var c=[a.total],d=k;d<=l;d+=1)c.push(a.values[d]);n.push(c)}),n):(o=B,q=(p=b).timeInterval,r=i(o),s=e.n.min(e.n.map(o,function(a){return a.stage})),t=(0,e.d)(e.n.last(r).date).diff(e.n.first(r).date,h[q]),u=s+t,v=null,w=[],e.n.each(r,function(a){if(null!==v)for(var b=Math.abs(v.diff(a.date,h[q]));b>1;){for(var c=[0],d=s;d<=u;d+=1)c.push(a.values[d]||0);w.push(c),u-=1,b-=1}v=a.date;for(var e=[a.total],f=s;f<=u;f+=1)e.push(a.values[f]||0);u-=1,w.push(e)}),w),{data:A,initialDate:C}}(b,c)},[b,c]),g=f.data,j=f.initialDate,k=(0,d.useMemo)(function(){return{initialDate:j,timeInterval:c.timeInterval,noValuePlaceholder:c.noValuePlaceholder,rawNumberOnHover:c.showTooltips,displayAbsoluteValues:!c.percentValues,timeColumnTitle:c.timeColumnTitle,peopleColumnTitle:c.peopleColumnTitle,stageColumnTitle:c.stageColumnTitle,numberFormat:c.numberFormat,percentFormat:c.percentFormat,colors:c.colors}},[c,j]);return 0===g.length?null:d.createElement("div",{className:"cohort-visualization-container"},d.createElement(q,{data:g,options:k}))}q.defaultProps={data:[],options:{}},r.propTypes=e.R},47783:function(a,b,c){c.d(b,{c:function(){return f}});var d=c(50956),e=c(92929);function f(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:["#ffffff","#333333"];try{return a=(0,e.c)(a),d.l.maxBy(b,function(b){return e.c.contrast(a,b)})}catch(c){return null}}}}])