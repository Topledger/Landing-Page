"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1076],{21076:function(a,b,c){c.r(b),c.d(b,{default:function(){return n}});var d=c(50956),e=c(67294),f=c(94354),g=c.n(f);c(73935),c(61920),c(97762);var h={string:d.K,number:d.L,datetime:d.M,boolean:d.N,link:d.O,image:d.P,json:d.Q};(0,d.s)("/* --------------------------------------------------------\n    Colors\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Font\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Borders\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Typography\n-----------------------------------------------------------*/\n/* --------------------------------------------------------\n    Table\n-----------------------------------------------------------*/\n.table-visualization-container {\n  /* START table x scroll */\n  /* END */\n}\n.table-visualization-container .ant-pagination.ant-table-pagination {\n  float: none;\n  display: block;\n  text-align: center;\n  margin-bottom: 0;\n}\n.table-visualization-container .ant-table {\n  overflow-x: auto;\n}\n.table-visualization-container .table-fixed-header table {\n  border-top: 0;\n}\n.table-visualization-container .table-fixed-header table th:not(.table-visualization-search) {\n  position: sticky !important;\n  left: 0;\n  top: 0;\n  border-top: 0;\n  z-index: 1;\n  background: #fafafa !important;\n}\n.table-visualization-container table {\n  border-top: 1px solid #e8e8e8;\n  border-bottom: 0;\n}\n.table-visualization-container table .display-as-number,\n.table-visualization-container table .display-as-boolean,\n.table-visualization-container table .display-as-datetime,\n.table-visualization-container table .display-as-image {\n  width: 1%;\n  white-space: nowrap;\n}\n.table-visualization-container table .table-visualization-spacer {\n  padding-left: 0;\n  padding-right: 0;\n}\n.table-visualization-container table .table-visualization-spacer > div:before {\n  content: none !important;\n}\n.table-visualization-container table tbody tr:last-child td {\n  border-bottom: 0;\n}\n.table-visualization-container table thead .ant-table-column-sorter-up,\n.table-visualization-container table thead .ant-table-column-sorter-down {\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n.table-visualization-container table thead:hover .ant-table-column-sorter-up,\n.table-visualization-container table thead .table-visualization-column-is-sorted .ant-table-column-sorter-up,\n.table-visualization-container table thead:hover .ant-table-column-sorter-down,\n.table-visualization-container table thead .table-visualization-column-is-sorted .ant-table-column-sorter-down {\n  opacity: 1;\n}\n.table-visualization-container table thead th {\n  white-space: nowrap;\n}\n.table-visualization-container table thead th.table-visualization-search {\n  padding-bottom: 0;\n}\n.table-visualization-container table thead th.table-visualization-search .ant-table-header-column {\n  display: block;\n}\n.table-visualization-container table thead th .ant-input-search {\n  font-weight: normal;\n}\n.table-visualization-container table thead th .ant-input-search .ant-input-suffix .anticon {\n  cursor: auto;\n}\n.table-visualization-container table thead th.ant-table-column-has-actions.ant-table-column-has-sorters {\n  padding-right: 3px;\n}\n.table-visualization-container table thead th .table-visualization-heading {\n  display: inline-block;\n  max-width: 200px;\n  vertical-align: middle;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.table-visualization-container table thead th .table-visualization-heading[data-sort-column-index]:before {\n  content: attr(data-sort-column-index);\n  display: inline-block;\n  vertical-align: middle;\n  min-width: 12px;\n  height: 12px;\n  font-size: 36px/4;\n  border-radius: 12px / 2;\n  background: #c0c0c0;\n  text-align: center;\n  line-height: 12px;\n  color: #fff;\n  padding: 0 12px/4;\n  margin: 0 5px 0 0;\n}\n.dashboard-widget-wrapper:not(.widget-auto-height-enabled) .table-visualization-container,\n.query-fixed-layout .table-visualization-container {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n.dashboard-widget-wrapper:not(.widget-auto-height-enabled) .table-visualization-container div,\n.query-fixed-layout .table-visualization-container div {\n  height: inherit;\n}\n.dashboard-widget-wrapper:not(.widget-auto-height-enabled) .table-visualization-container .ant-spin-container,\n.query-fixed-layout .table-visualization-container .ant-spin-container {\n  display: flex;\n  flex-direction: column;\n}\n.dashboard-widget-wrapper:not(.widget-auto-height-enabled) .table-visualization-container .ant-spin-container .ant-table,\n.query-fixed-layout .table-visualization-container .ant-spin-container .ant-table {\n  flex-grow: 1;\n}\n.table-visualization-search-info-content {\n  max-width: 400px;\n}\n.table-visualization-search-info-icon {\n  margin: 0 5px 0 0;\n}\n.table-visualization-search-info-icon:not(:hover):not(:active) {\n  color: rgba(0, 0, 0, 0.45);\n}\n");var i=["searchColumns"];function j(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:", ";return d.l.reduce(a,function(a,c,d){return d>0&&a.push(b),a.push(c),a},[])}function k(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=b.limit,e=void 0===c?1/0:c,f=b.renderColumn,g=void 0===f?function(a){return a.title}:f,h=d.l.map(a.slice(0,e),function(a){return g(a)}),i=d.l.map(a.slice(e),function(a){return a.title});return i.length>0?[].concat((0,d.h)(j(h)),[" and ".concat(i.length," others")]):h.length>1?[].concat((0,d.h)(j(d.l.initial(h))),[" and ",d.l.last(h)]):h}function l(a){var b=a.searchColumns;return e.createElement(d.T,{arrowPointAtCenter:!0,placement:"topRight",content:e.createElement("div",{className:"table-visualization-search-info-content"},"Search ",k(b,{renderColumn:function(a){return e.createElement("code",{key:a.name},a.title)}}))},e.createElement(g(),{className:"table-visualization-search-info-icon"}))}function m(a){var b=a.searchColumns,c=(0,d.j)(a,i);return b.length<=0?null:e.createElement(d.S.Search,(0,d._)((0,d._)({},c),{},{placeholder:"Search ".concat(k(b,{limit:3}).join(""),"..."),suffix:b.length>3?e.createElement(l,{searchColumns:b}):null}))}function n(a){var b=a.options,c=a.data,f=(0,e.useState)(""),g=(0,d.i)(f,2),i=g[0],j=g[1],k=(0,e.useState)([]),l=(0,d.i)(k,2),n=l[0],o=l[1],p=(0,e.useMemo)(function(){return d.l.filter(b.columns,"allowSearch")},[b.columns]),q=(0,e.useMemo)(function(){var a=p.length>0?e.createElement(m,{searchColumns:p,onChange:function(a){return j(a.target.value)}}):null;return function(a,b,c,f){a=d.l.filter(a,"visible"),a=d.l.sortBy(a,"order");var g,i,j=c.length>1,k=(g=c,i={},d.l.each(g,function(a,b){var c=a.name,d=a.direction;i[c]={direction:d,index:b+1}}),i),l=d.l.map(a,function(a){var b=k[a.name]&&"ascend"===k[a.name].direction,g=k[a.name]&&"descend"===k[a.name].direction,i=j&&k[a.name]?k[a.name].index:null,l={key:a.name,dataIndex:"record[".concat(JSON.stringify(a.name),"]"),align:a.alignContent,sorter:{multiple:1},sortOrder:d.l.get(k,[a.name,"direction"],null),title:e.createElement(e.Fragment,null,a.description&&e.createElement("span",{style:{paddingRight:5}},e.createElement(d.o,{placement:"top",title:a.description},e.createElement("div",{className:"table-visualization-heading"},e.createElement("i",{className:"fa fa-info-circle","aria-hidden":"true"})))),e.createElement(d.o,{placement:"top",title:a.title},e.createElement("div",{className:"table-visualization-heading","data-sort-column-index":i},a.title))),onHeaderCell:function(){return{className:(0,d.q)({"table-visualization-column-is-sorted":b||g}),onClick:function(b){return f(function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&& void 0!==arguments[2]&&arguments[2],e=d.l.findIndex(b,function(b){return b.name===a}),f={name:a,direction:"ascend"};return e>=0&&(f.direction=function(a){switch(a){case"ascend":return"descend";case"descend":return null;default:return"ascend"}}(b[e].direction)),c?f.direction?(e>=0?b[e]=f:b.push(f),(0,d.h)(b)):d.l.filter(b,function(b){return b.name!==a}):f.direction?[f]:[]}(a.name,c,b.shiftKey))}}}},m=(0,h[a.displayAs])(a);return l.render=function(b,c){return{children:e.createElement(m,{row:c.record}),props:{className:"display-as-".concat(a.displayAs)}}},l});return l.push({key:"###Redash::Visualizations::Table::Spacer###",dataIndex:null,title:"",className:"table-visualization-spacer",render:function(){return""},onHeaderCell:function(){return{className:"table-visualization-spacer"}}}),b&&(l=[{key:"table-search",title:b,onHeaderCell:function(){return{className:"table-visualization-search"}},children:l}]),l}(b.columns,a,n,function(a){o(a),document.getSelection().removeAllRanges()})},[b.columns,p,n]),r=(0,e.useMemo)(function(){var a;return function(a,b){if(0===b.length||0===a.length)return a;var c={ascend:1,descend:-1};return(0,d.h)(a).sort(function(a,e){for(var f,g,h=0;h<b.length;h+=1){if(f=a.record[b[h].name],g=e.record[b[h].name],d.l.isNil(f)||f<g)return -1*c[b[h].direction];if(f>g||d.l.isNil(g))return 1*c[b[h].direction]}return 0})}(function(a,b,c){if(""!==b&&c.length>0){b=b.toUpperCase();var e=d.l.map(c,function(a){var c=(0,h[a.displayAs])(a).prepareData;return function(a){var e=c(a).text;return d.l.toString(e).toUpperCase().indexOf(b)>=0}});return d.l.filter(a,function(a){return d.l.some(e,function(b){return b(a.record)})})}return a}((a=c.rows,d.l.map(a,function(a,b){return{key:"record".concat(b),record:a}})),i,p),n)},[c.rows,i,p,n]);return(0,e.useEffect)(function(){o([])},[b.columns,c.columns]),0===c.rows.length?null:e.createElement("div",{className:"table-visualization-container"},e.createElement(d.I,{className:"table-fixed-header","data-percy":"show-scrollbars","data-test":"TableVisualization",columns:q,dataSource:r,pagination:{size:d.l.get(b,"paginationSize",""),position:"bottom",pageSize:b.itemsPerPage,hideOnSinglePage:!0,showSizeChanger:!1},showSorterTooltip:!1}))}m.defaultProps={onChange:function(){}},n.propTypes=d.R}}])