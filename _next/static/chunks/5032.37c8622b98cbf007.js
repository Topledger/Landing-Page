"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5032,9799],{5032:function(a,b,c){c.r(b),c.d(b,{default:function(){return v}});var d,e,f=c(2540),g=c(5078),h=c(7294),i=c(9799),j={value:function(){}};function k(){for(var a,b=0,c=arguments.length,d={};b<c;++b){if(!(a=arguments[b]+"")||a in d||/[\s.]/.test(a))throw Error("illegal type: "+a);d[a]=[]}return new l(d)}function l(a){this._=a}function m(a,b){return a.trim().split(/^|\s+/).map(function(a){var c="",d=a.indexOf(".");if(d>=0&&(c=a.slice(d+1),a=a.slice(0,d)),a&&!b.hasOwnProperty(a))throw Error("unknown type: "+a);return{type:a,name:c}})}function n(a,b){for(var c,d=0,e=a.length;d<e;++d)if((c=a[d]).name===b)return c.value}function o(a,b,c){for(var d=0,e=a.length;d<e;++d)if(a[d].name===b){a[d]=j,a=a.slice(0,d).concat(a.slice(d+1));break}return null!=c&&a.push({name:b,value:c}),a}l.prototype=k.prototype={constructor:l,on:function(a,b){var c,d=this._,e=m(a+"",d),f=-1,g=e.length;if(arguments.length<2){for(;++f<g;)if((c=(a=e[f]).type)&&(c=n(d[c],a.name)))return c;return}if(null!=b&&"function"!=typeof b)throw Error("invalid callback: "+b);for(;++f<g;)if(c=(a=e[f]).type)d[c]=o(d[c],a.name,b);else if(null==b)for(c in d)d[c]=o(d[c],a.name,null);return this},copy:function(){var a={},b=this._;for(var c in b)a[c]=b[c].slice();return new l(a)},call:function(a,b){if((c=arguments.length-2)>0)for(var c,d,e=Array(c),f=0;f<c;++f)e[f]=arguments[f+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);for(d=this._[a],f=0,c=d.length;f<c;++f)d[f].value.apply(b,e)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);for(var d=this._[a],e=0,f=d.length;e<f;++e)d[e].value.apply(b,c)}};let p=Object.freeze(Object.defineProperty({__proto__:null,dispatch:k},Symbol.toStringTag,{value:"Module"})),q=(0,f.a)(p);var r=function(){if(e)return d;e=1;var a=q.dispatch,b=Math.PI/180,c=64,f=2048;function g(a){return a.text}function h(){return"serif"}function i(){return"normal"}function j(a){return Math.sqrt(a.value)}function k(){return(~~(6*Math.random())-3)*30}function l(){return 1}function m(a,d,e,g){if(!d.sprite){var h=a.context,i=a.ratio;h.clearRect(0,0,(c<<5)/i,f/i);var j=0,k=0,l=0,m=e.length;for(--g;++g<m;){d=e[g],h.save(),h.font=d.style+" "+d.weight+" "+ ~~((d.size+1)/i)+"px "+d.font;var n=h.measureText(d.text+"m").width*i,o=d.size<<1;if(d.rotate){var p=Math.sin(d.rotate*b),q=Math.cos(d.rotate*b),r=n*q,s=n*p,t=o*q,u=o*p;n=Math.max(Math.abs(r+u),Math.abs(r-u))+31>>5<<5,o=~~Math.max(Math.abs(s+t),Math.abs(s-t))}else n=n+31>>5<<5;if(o>l&&(l=o),j+n>=c<<5&&(j=0,k+=l,l=0),k+o>=f)break;h.translate((j+(n>>1))/i,(k+(o>>1))/i),d.rotate&&h.rotate(d.rotate*b),h.fillText(d.text,0,0),d.padding&&(h.lineWidth=2*d.padding,h.strokeText(d.text,0,0)),h.restore(),d.width=n,d.height=o,d.xoff=j,d.yoff=k,d.x1=n>>1,d.y1=o>>1,d.x0=-d.x1,d.y0=-d.y1,d.hasText=!0,j+=n}for(var v=h.getImageData(0,0,(c<<5)/i,f/i).data,w=[];--g>=0;)if((d=e[g]).hasText){for(var n=d.width,x=n>>5,o=d.y1-d.y0,y=0;y<o*x;y++)w[y]=0;if(null==(j=d.xoff))return;k=d.yoff;for(var z=0,A=-1,B=0;B<o;B++){for(var y=0;y<n;y++){var C=x*B+(y>>5),D=v[(k+B)*(c<<5)+(j+y)<<2]?1<<31-y%32:0;w[C]|=D,z|=D}z?A=B:(d.y0++,o--,B--,k++)}d.y1=d.y0+A,d.sprite=w.slice(0,(d.y1-d.y0)*x)}}}function n(a,b,c){c>>=5;for(var d,e=a.sprite,f=a.width>>5,g=a.x-(f<<4),h=127&g,i=32-h,j=a.y1-a.y0,k=(a.y+a.y0)*c+(g>>5),l=0;l<j;l++){d=0;for(var m=0;m<=f;m++)if((d<<i|(m<f?(d=e[l*f+m])>>>h:0))&b[k+m])return!0;k+=c}return!1}function o(a,b){var c=a[0],d=a[1];b.x+b.x0<c.x&&(c.x=b.x+b.x0),b.y+b.y0<c.y&&(c.y=b.y+b.y0),b.x+b.x1>d.x&&(d.x=b.x+b.x1),b.y+b.y1>d.y&&(d.y=b.y+b.y1)}function p(a,b){return a.x+a.x1>b[0].x&&a.x+a.x0<b[1].x&&a.y+a.y1>b[0].y&&a.y+a.y0<b[1].y}function r(a){var b=a[0]/a[1];return function(a){return[b*(a*=.1)*Math.cos(a),a*Math.sin(a)]}}function s(a){for(var b=[],c=-1;++c<a;)b[c]=0;return b}function t(){return document.createElement("canvas")}function u(a){return"function"==typeof a?a:function(){return a}}d=function(){var b=[256,256],d=g,e=h,q=j,w=i,x=i,y=k,z=l,A=r,B=[],C=1/0,D=a("word","end"),E=null,F=Math.random,G={},H=t;function I(a,c,d){b[0],b[1];for(var e,f,g,h=c.x,i=c.y,j=Math.sqrt(b[0]*b[0]+b[1]*b[1]),k=A(b),l=.5>F()?1:-1,m=-l;(e=k(m+=l))&&(f=~~e[0],g=~~e[1],!(Math.min(Math.abs(f),Math.abs(g))>=j));)if(c.x=h+f,c.y=i+g,!(c.x+c.x0<0||c.y+c.y0<0||c.x+c.x1>b[0]||c.y+c.y1>b[1])&&(!d||!n(c,a,b[0]))&&(!d||p(c,d))){for(var o,q=c.sprite,r=c.width>>5,s=b[0]>>5,t=c.x-(r<<4),u=127&t,v=32-u,w=c.y1-c.y0,x=(c.y+c.y0)*s+(t>>5),y=0;y<w;y++){o=0;for(var z=0;z<=r;z++)a[x+z]|=o<<v|(z<r?(o=q[y*r+z])>>>u:0);x+=s}return delete c.sprite,!0}return!1}return G.canvas=function(a){return arguments.length?(H=u(a),G):H},G.start=function(){var a,g,h,i=(a=H(),a.width=a.height=1,g=Math.sqrt(a.getContext("2d").getImageData(0,0,1,1).data.length>>2),a.width=(c<<5)/g,a.height=f/g,h=a.getContext("2d"),h.fillStyle=h.strokeStyle="red",h.textAlign="center",{context:h,ratio:g}),j=s((b[0]>>5)*b[1]),k=null,l=B.length,n=-1,p=[],r=B.map(function(a,b){return a.text=d.call(this,a,b),a.font=e.call(this,a,b),a.style=w.call(this,a,b),a.weight=x.call(this,a,b),a.rotate=y.call(this,a,b),a.size=~~q.call(this,a,b),a.padding=z.call(this,a,b),a}).sort(function(a,b){return b.size-a.size});return E&&clearInterval(E),E=setInterval(t,0),t(),G;function t(){for(var a=Date.now();Date.now()-a<C&& ++n<l&&E;){var c=r[n];c.x=b[0]*(F()+.5)>>1,c.y=b[1]*(F()+.5)>>1,m(i,c,r,n),c.hasText&&I(j,c,k)&&(p.push(c),D.call("word",G,c),k?o(k,c):k=[{x:c.x+c.x0,y:c.y+c.y0},{x:c.x+c.x1,y:c.y+c.y1}],c.x-=b[0]>>1,c.y-=b[1]>>1)}n>=l&&(G.stop(),D.call("end",G,p,k))}},G.stop=function(){return E&&(clearInterval(E),E=null),G},G.timeInterval=function(a){return arguments.length?(C=a??1/0,G):C},G.words=function(a){return arguments.length?(B=a,G):B},G.size=function(a){return arguments.length?(b=[+a[0],+a[1]],G):b},G.font=function(a){return arguments.length?(e=u(a),G):e},G.fontStyle=function(a){return arguments.length?(w=u(a),G):w},G.fontWeight=function(a){return arguments.length?(x=u(a),G):x},G.rotate=function(a){return arguments.length?(y=u(a),G):y},G.text=function(a){return arguments.length?(d=u(a),G):d},G.spiral=function(a){return arguments.length?(A=v[a]||a,G):A},G.fontSize=function(a){return arguments.length?(q=u(a),G):q},G.padding=function(a){return arguments.length?(z=u(a),G):z},G.random=function(a){return arguments.length?(F=a,G):F},G.on=function(){var a=D.on.apply(D,arguments);return a===D?G:a},G};var v={archimedean:r,rectangular:function(a){var b=4,c=b*a[0]/a[1],d=0,e=0;return function(a){var f=a<0?-1:1;switch(Math.sqrt(1+4*f*a)-f&3){case 0:d+=c;break;case 1:e+=b;break;case 2:d-=c;break;default:e-=b}return[d,e]}}};return d}();let s=(0,f.g)(r);function t(a,b){a.style.transform=null;let{width:c,height:d}=a.getBoundingClientRect(),{width:e,height:f}=b.getBoundingClientRect();a.style.transform=`scale(${Math.min(e/c,f/d)})`}function u(){let a=window.getComputedStyle(document.body).fontFamily;return s().size([5e3,5e3]).padding(3).font(a).rotate(a=>a.angle).fontSize(a=>a.size).random(()=>.5)}function v({data:a,options:b}){let[c,d]=(0,h.useState)(null),[e,j]=(0,h.useState)([]),k=(0,h.useMemo)(u,[]);return(0,h.useEffect)(()=>(k.words(function(a,b){let c=[];b.column&&(c=b.frequenciesColumn?function(a,b,c){let d={};return f.l.each(a,a=>{let e=parseFloat(a[c]);if(Number.isFinite(e)&&e>0){let g=f.l.toString(a[b]);d[g]=e}}),d}(a,b.column,b.frequenciesColumn):function(a,b){let c={};return f.l.each(a,a=>{let d=f.l.toString(a[b]).split(/\s/g);f.l.each(d,a=>{c[a]=(c[a]||0)+1})}),c}(a,b.column),c=f.l.sortBy(f.l.map(c,(a,b)=>({text:b,count:a})),[({count:a})=>-a,({text:a})=>-a.length]));let d=f.l.map(c,a=>a.count),e=g.scale.linear().domain([f.l.min(d),f.l.max(d)]).range([10,100]),h=g.scale.category20();return f.l.each(c,(a,b)=>{a.size=e(a.count),a.color=h(b),a.angle=b%2*90}),function(a,{wordLength:b,wordCount:c}){return b.min=Number.isFinite(b.min)?b.min:null,b.max=Number.isFinite(b.max)?b.max:null,c.min=Number.isFinite(c.min)?c.min:null,c.max=Number.isFinite(c.max)?c.max:null,f.l.filter(a,({text:a,count:d})=>{let e=(!b.min||a.length>=b.min)&&(!b.max||a.length<=b.max),f=(!c.min||d>=c.min)&&(!c.max||d<=c.max);return e&&f})}(c,{wordLength:b.wordLengthLimit,wordCount:b.wordCountLimit})}(a.rows,b)).on("end",a=>j(a)).start(),()=>k.on("end",null).stop()),[k,a,b,j]),(0,h.useEffect)(()=>{c&&function(a,b){(a=g.select(a)).selectAll("*").remove();let c=a.append("svg"),d=c.append("g");d.selectAll("text").data(b).enter().append("text").style("font-size",a=>`${a.size}px`).style("font-family",a=>a.font).style("fill",a=>a.color).attr("text-anchor","middle").attr("transform",a=>`translate(${[a.x,a.y]}) rotate(${a.rotate})`).text(a=>a.text);let e=c.node().getBoundingClientRect(),f=d.node().getBoundingClientRect();c.attr("width",Math.ceil(f.width)).attr("height",Math.ceil(f.height)),d.attr("transform",`translate(${e.left-f.left},${e.top-f.top})`),t(c.node(),a.node())}(c,e)},[c,e]),(0,h.useEffect)(()=>{if(c)return(0,i.o)(c,()=>{let a=c.querySelector("svg");a&&t(a,c)})},[c]),f.j.jsx("div",{className:"word-cloud-visualization-container",ref:d})}v.propTypes=f.R},9799:function(a,b,c){c.d(b,{o:function(){return f}});let d=new Map;function e(){d.size>0&&(d.forEach((a,b)=>{let c=b.getBoundingClientRect(),d=Math.round(10*c.width),e=Math.round(10*c.height);(a.width!==d||a.height!==e)&&(a.width=d,a.height=e,a.callback(b))}),setTimeout(e,100))}function f(a,b){if(a&&!d.has(a)){let c=0===d.size;return d.set(a,{callback:b}),c&&e(),()=>d.delete(a)}return()=>{}}}}])