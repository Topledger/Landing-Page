"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5716],{5716:function(a,b,c){c.r(b),c.d(b,{default:function(){return w}});var d,e,f,g,h,i,j,k,l=c(2540),m=c(7294),n={exports:{}},o={},p={},q=(f||(f=1,h=n,i=n.exports,Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,j=(d=function(){if(e)return o;e=1;var a=(0,l.J)(),b=(0,l.K)();Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=a((0,l.M)()),d=function(a,c){if(a&&a.__esModule)return a;if(null===a||"object"!==b(a)&&"function"!=typeof a)return{default:a};var d=i(void 0);if(d&&d.has(a))return d.get(a);var e={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,d&&d.set(a,e),e}(m),f=a(function(){if(g)return p;g=1,Object.defineProperty(p,"__esModule",{value:!0});var a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};return p.default=a,p}()),h=a((0,l.N)());function i(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(i=function(a){return a?c:b})(a)}var j=function(a,b){return d.createElement(h.default,(0,c.default)((0,c.default)({},a),{},{ref:b,icon:f.default}))};j.displayName="InfoCircleFilled";var k=d.forwardRef(j);return o.default=k,o}(),d&&d.__esModule?d:{default:d}),k=j,i.default=k,h.exports=k),n.exports);let r=(0,l.g)(q);function s(a,b=", "){return l.l.reduce(a,(a,c,d)=>(d>0&&a.push(b),a.push(c),a),[])}function t(a,{limit:b=1/0,renderColumn:c=a=>a.title}={}){let d=l.l.map(a.slice(0,b),a=>c(a)),e=l.l.map(a.slice(b),a=>a.title);return e.length>0?[...s(d),` and ${e.length} others`]:d.length>1?[...s(l.l.initial(d))," and ",l.l.last(d)]:d}function u({searchColumns:a}){return l.j.jsx(l.Q,{arrowPointAtCenter:!0,placement:"topRight",content:l.j.jsxs("div",{className:"table-visualization-search-info-content",children:["Search ",t(a,{renderColumn:a=>l.j.jsx("code",{children:a.title},a.name)})]}),children:l.j.jsx(r,{className:"table-visualization-search-info-icon"})})}function v({searchColumns:a,...b}){if(a.length<=0)return null;let c=3;return l.j.jsx(l.P.Search,{...b,placeholder:`Search ${t(a,{limit:c}).join("")}...`,suffix:a.length>c?l.j.jsx(u,{searchColumns:a}):null})}function w({options:a,data:b}){let[c,d]=(0,m.useState)(""),[e,f]=(0,m.useState)([]),g=(0,m.useMemo)(()=>l.l.filter(a.columns,"allowSearch"),[a.columns]),h=(0,m.useMemo)(()=>{let b=g.length>0?l.j.jsx(v,{searchColumns:g,onChange:a=>d(a.target.value)}):null;return function(a,b,c,d){a=l.l.filter(a,"visible"),a=l.l.sortBy(a,"order");let e=c.length>1,f=function(a){let b={};return l.l.each(a,({name:a,direction:c},d)=>{b[a]={direction:c,index:d+1}}),b}(c),g=l.l.map(a,a=>{let b=f[a.name]&&"ascend"===f[a.name].direction,g=f[a.name]&&"descend"===f[a.name].direction,h=e&&f[a.name]?f[a.name].index:null,i={key:a.name,dataIndex:`record[${JSON.stringify(a.name)}]`,align:a.alignContent,sorter:{multiple:1},sortOrder:l.l.get(f,[a.name,"direction"],null),title:l.j.jsxs(m.Fragment,{children:[a.description&&l.j.jsx("span",{style:{paddingRight:5},children:l.j.jsx(l.T,{placement:"top",title:a.description,children:l.j.jsx("div",{className:"table-visualization-heading",children:l.j.jsx("i",{className:"fa fa-info-circle","aria-hidden":"true"})})})}),l.j.jsx(l.T,{placement:"top",title:a.title,children:l.j.jsx("div",{className:"table-visualization-heading","data-sort-column-index":h,children:a.title})})]}),onHeaderCell:()=>({className:(0,l.n)({"table-visualization-column-is-sorted":b||g}),onClick:b=>d(function(a,b=[],c=!1){let d=l.l.findIndex(b,b=>b.name===a),e={name:a,direction:"ascend"};return d>=0&&(e.direction=function(a){switch(a){case"ascend":return"descend";case"descend":return null;default:return"ascend"}}(b[d].direction)),c?e.direction?(d>=0?b[d]=e:b.push(e),[...b]):l.l.filter(b,b=>b.name!==a):e.direction?[e]:[]}(a.name,c,b.shiftKey))})},j=l.O[a.displayAs],k=j(a);return i.render=(b,c)=>({children:l.j.jsx(k,{row:c.record}),props:{className:`display-as-${a.displayAs}`}}),i});return g.push({key:"###Redash::Visualizations::Table::Spacer###",dataIndex:null,title:"",className:"table-visualization-spacer",render:()=>"",onHeaderCell:()=>({className:"table-visualization-spacer"})}),b&&(g=[{key:"table-search",title:b,onHeaderCell:()=>({className:"table-visualization-search"}),children:g}]),g}(a.columns,b,e,a=>{f(a),document.getSelection().removeAllRanges()})},[a.columns,g,e]),i=(0,m.useMemo)(()=>{var a;return function(a,b){if(0===b.length||0===a.length)return a;let c={ascend:1,descend:-1};return[...a].sort((a,d)=>{let e,f;for(let g=0;g<b.length;g+=1){if(e=a.record[b[g].name],f=d.record[b[g].name],l.l.isNil(e)||e<f)return -1*c[b[g].direction];if(e>f||l.l.isNil(f))return 1*c[b[g].direction]}return 0})}(function(a,b,c){if(""!==b&&c.length>0){b=b.toUpperCase();let d=l.l.map(c,a=>{let c=l.O[a.displayAs],{prepareData:d}=c(a);return a=>{let{text:c}=d(a);return l.l.toString(c).toUpperCase().indexOf(b)>=0}});return l.l.filter(a,a=>l.l.some(d,b=>b(a.record)))}return a}((a=b.rows,l.l.map(a,(a,b)=>({key:`record${b}`,record:a}))),c,g),e)},[b.rows,c,g,e]);return(0,m.useEffect)(()=>{f([])},[a.columns,b.columns]),0===b.rows.length?null:l.j.jsx("div",{className:"table-visualization-container",children:l.j.jsx(l.H,{className:"table-fixed-header","data-percy":"show-scrollbars","data-test":"TableVisualization",columns:h,dataSource:i,pagination:{size:l.l.get(a,"paginationSize",""),position:"bottom",pageSize:a.itemsPerPage,hideOnSinglePage:!0,showSizeChanger:!1},showSorterTooltip:!1})})}v.defaultProps={onChange:()=>{}},w.propTypes=l.R}}])