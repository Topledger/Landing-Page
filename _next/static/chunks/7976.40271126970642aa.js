"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7976,9826],{7976:function(a,b,c){c.r(b),c.d(b,{default:function(){return k}});var d=c(9476),e=c(7294),f=c(9826),g=c(5078);c(3935),c(7762);var h="<<<Exit>>>",i=g.scale.category10();function j(a){return i(a.name)}function k(a){var b=a.data,c=(0,e.useState)(null),k=(0,d._)(c,2),l=k[0],m=k[1],n=(0,e.useMemo)(function(){var a,c,e,f,k,l,m,n,o,p;return(c=a=b)&&c.rows.length>0?(a=(f=e=a.rows,k=d.l.first(f),e=d.l.every(["sequence","stage","node","value"],function(a){return d.l.has(k,a)})?(l=e,m=d.l.groupBy(l,"sequence"),d.l.map(m,function(a){var b=d.l.sortBy(a,"stage");return{size:a[0].value||0,sequence:a[0].sequence,nodes:d.l.map(b,function(a){return a.node})}})):(n=e,o=d.l.sortBy(d.l.filter(d.l.keys(n[0]),function(a){return"value"!==a}),d.l.identity),d.l.map(n,function(a,b){return{size:a.value||0,sequence:b,nodes:d.l.compact(d.l.map(o,function(b){return a[b]}))}})),p={name:"root",children:[]},e.forEach(function(a){for(var b=a.nodes,c=parseInt(a.size,10),e=p,f=function(){var a=e.children,f=b[g],i=g+1===b.length;a||(e.children=a=[],a.push({name:h,size:e.size}));var j=d.l.find(a,function(a){return a.name===f});i&&j?(j.children=j.children||[],j.children.push({name:h,size:c})):i?a.push({name:f,size:c}):(j||(j={name:f,children:[]},a.push(j)),e=j)},g=0;g<b.length;g+=1)f()}),p),function(b){g.select(b).selectAll("*").remove();var c=b.clientWidth,d=b.offsetHeight,e={w:c/6,h:30,s:3,t:10},f=Math.min(c-e.h,d-e.h)/2-5;if(!(f<=0)){var k,l={top:f,bottom:50,left:f,right:0},m=0,n=g.layout.partition().size([2*Math.PI,f*f]).value(function(a){return a.size}),o=g.svg.arc().startAngle(function(a){return a.x}).endAngle(function(a){return a.x+a.dx}).innerRadius(function(a){return Math.sqrt(a.y)}).outerRadius(function(a){return Math.sqrt(a.y+a.dy)}),p=g.select(b),q=p.append("div").classed("breadcrumbs-container",!0).append("svg").attr("width",c).attr("height",e.h).attr("fill","white").attr("font-weight",600),r=p.append("div"),s=r.append("div").classed("summary-container",!0),t=r.append("div").classed("sunburst-container",!0).append("svg").attr("width",2*f).attr("height",2*f).append("g").attr("transform","translate(".concat(l.left,",").concat(l.top,")")),u=q.append("text").classed("lastCrumb",!0),v=n.nodes(a).filter(function(a){return a.dx>.005&&a.name!==h}),w=(k=[],v.forEach(function(a){-1===k.indexOf(a.name)&&k.push(a.name)}),k);i.domain(w);var x=t.data([a]).selectAll("path").data(v).enter().append("path").classed("nodePath",!0).attr("display",function(a){return a.depth?null:"none"}).attr("d",o).attr("fill",j).attr("opacity",1).attr("stroke","white").on("mouseover",z);p.on("click",function(){t.selectAll("path").on("mouseover",null),t.selectAll("path").transition().duration(1e3).attr("opacity",1).each("end",function(){g.select(this).on("mouseover",z)}),q.style("visibility","hidden"),s.style("visibility","hidden")}),m=x.node().__data__.value}function y(a,b){var c=[];return c.push("0,0"),c.push("".concat(e.w,",0")),c.push("".concat(e.w+e.t,",").concat(e.h/2)),c.push("".concat(e.w,",").concat(e.h)),c.push("0,".concat(e.h)),b>0&&c.push("".concat(e.t,",").concat(e.h/2)),c.join(" ")}function z(a){var b=(100*a.value/m).toPrecision(3),c="".concat(b,"%");b<1&&(c="< 1.0%");var d,f,g,h,i=function(a){for(var b=[],c=a;c.parent;)b.unshift(c),c=c.parent;return b}(a);d=i,f=c,(h=(g=q.selectAll("g").data(d,function(a){return a.name+a.depth})).enter().append("g")).append("polygon").classed("breadcrumbs-shape",!0).attr("points",y).attr("fill",j),h.append("text").classed("breadcrumbs-text",!0).attr("x",(e.w+e.t)/2).attr("y",e.h/2).attr("dy","0.35em").attr("font-size","10px").attr("text-anchor","middle").text(function(a){return a.name}),g.attr("transform",function(a,b){return"translate(".concat(b*(e.w+e.s),", 0)")}),g.exit().remove(),u.attr("x",(d.length+.5)*(e.w+e.s)).attr("y",e.h/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","black").attr("font-weight",600).text(f),t.selectAll("path").attr("opacity",.3),t.selectAll("path").filter(function(a){return i.indexOf(a)>=0}).attr("opacity",1),s.html("\n      <span>Stage: ".concat(a.depth,"</span>\n      <span class='percentage' style='font-size: 2em;'>").concat(c,"</span>\n      <span>").concat(a.value," of ").concat(m,"</span>\n    ")),s.style("visibility",""),q.style("visibility","")}}):function(a){g.select(a).selectAll("*").remove()}},[b]);return(0,e.useEffect)(function(){if(l)return n(l),(0,f.o)(l,function(){n(l)})},[l,n]),e.createElement("div",{className:"sunburst-visualization-container",ref:m})}(0,d.s)(".sunburst-visualization-container {\n  height: 400px;\n  display: flex;\n  flex-direction: column;\n}\n.sunburst-visualization-container > div {\n  position: relative;\n}\n.sunburst-visualization-container > div:first-child {\n  flex-grow: 0;\n}\n.sunburst-visualization-container > div:last-child {\n  flex-grow: 1;\n}\n.sunburst-visualization-container .sunburst-container,\n.sunburst-visualization-container .summary-container {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  width: auto;\n  height: auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.sunburst-visualization-container .summary-container {\n  font-size: 11px;\n  color: #666;\n}\n"),k.propTypes=d.R},9826:function(a,b,c){c.d(b,{o:function(){return f}});var d=new Map;function e(){d.size>0&&(d.forEach(function(a,b){var c=b.getBoundingClientRect(),d=Math.round(10*c.width),e=Math.round(10*c.height);a.width===d&&a.height===e||(a.width=d,a.height=e,a.callback(b))}),setTimeout(e,100))}function f(a,b){if(a&&!d.has(a)){var c=0===d.size;return d.set(a,{callback:b}),c&&e(),function(){return d.delete(a)}}return function(){}}}}])