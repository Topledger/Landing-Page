"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3065,9799],{3065:function(a,b,c){c.r(b),c.d(b,{default:function(){return k}});var d=c(2540),e=c(7294),f=c(9799),g=c(5078);let h="<<<Exit>>>",i=g.scale.category10();function j(a){return i(a.name)}function k({data:a}){let[b,c]=(0,e.useState)(null),k=(0,e.useMemo)(()=>{var b,c;return(c=b=a)&&c.rows.length>0?(b=function(a){a=!function(a){let b=d.l.first(a);return d.l.every(["sequence","stage","node","value"],a=>d.l.has(b,a))}(a)?function(a){let b=d.l.sortBy(d.l.filter(d.l.keys(a[0]),a=>"value"!==a),d.l.identity);return d.l.map(a,(a,c)=>({size:a.value||0,sequence:c,nodes:d.l.compact(d.l.map(b,b=>a[b]))}))}(a):function(a){let b=d.l.groupBy(a,"sequence");return d.l.map(b,a=>{let b=d.l.sortBy(a,"stage");return{size:a[0].value||0,sequence:a[0].sequence,nodes:d.l.map(b,a=>a.node)}})}(a);let b={name:"root",children:[]};return a.forEach(a=>{let c=a.nodes,e=parseInt(a.size,10),f=b;for(let g=0;g<c.length;g+=1){let i=f.children,j=c[g],k=g+1===c.length;i||(f.children=i=[],i.push({name:h,size:f.size}));let l=d.l.find(i,a=>a.name===j);k&&l?(l.children=l.children||[],l.children.push({name:h,size:e})):k?i.push({name:j,size:e}):(l||(l={name:j,children:[]},i.push(l)),f=l)}}),b}(b.rows),a=>{g.select(a).selectAll("*").remove();let c=a.clientWidth,d=a.offsetHeight,e={w:c/6,h:30,s:3,t:10},f=Math.min(c-e.h,d-e.h)/2-5;if(f<=0)return;let k={top:f,bottom:50,left:f,right:0},l=0,m=g.layout.partition().size([2*Math.PI,f*f]).value(a=>a.size),n=g.svg.arc().startAngle(a=>a.x).endAngle(a=>a.x+a.dx).innerRadius(a=>Math.sqrt(a.y)).outerRadius(a=>Math.sqrt(a.y+a.dy)),o=g.select(a),p=o.append("div").classed("breadcrumbs-container",!0).append("svg").attr("width",c).attr("height",e.h).attr("fill","white").attr("font-weight",600),q=o.append("div"),r=q.append("div").classed("summary-container",!0),s=q.append("div").classed("sunburst-container",!0).append("svg").attr("width",2*f).attr("height",2*f).append("g").attr("transform",`translate(${k.left},${k.top})`),t=p.append("text").classed("lastCrumb",!0);function u(a,b){let c=[];return c.push("0,0"),c.push(`${e.w},0`),c.push(`${e.w+e.t},${e.h/2}`),c.push(`${e.w},${e.h}`),c.push(`0,${e.h}`),b>0&&c.push(`${e.t},${e.h/2}`),c.join(" ")}function v(a){let b=(100*a.value/l).toPrecision(3),c=`${b}%`;b<1&&(c="< 1.0%");let d=function(a){let b=[],c=a;for(;c.parent;)b.unshift(c),c=c.parent;return b}(a);(function(a,b){let c=p.selectAll("g").data(a,a=>a.name+a.depth),d=c.enter().append("g");d.append("polygon").classed("breadcrumbs-shape",!0).attr("points",u).attr("fill",j),d.append("text").classed("breadcrumbs-text",!0).attr("x",(e.w+e.t)/2).attr("y",e.h/2).attr("dy","0.35em").attr("font-size","10px").attr("text-anchor","middle").text(a=>a.name),c.attr("transform",(a,b)=>`translate(${b*(e.w+e.s)}, 0)`),c.exit().remove(),t.attr("x",(a.length+.5)*(e.w+e.s)).attr("y",e.h/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","black").attr("font-weight",600).text(b)})(d,c),s.selectAll("path").attr("opacity",.3),s.selectAll("path").filter(a=>d.indexOf(a)>=0).attr("opacity",1),r.html(`
      <span>Stage: ${a.depth}</span>
      <span class='percentage' style='font-size: 2em;'>${c}</span>
      <span>${a.value} of ${l}</span>
    `),r.style("visibility",""),p.style("visibility","")}let w=m.nodes(b).filter(a=>a.dx>.005&&a.name!==h),x=function(a){let b=[];return a.forEach(a=>{-1===b.indexOf(a.name)&&b.push(a.name)}),b}(w);i.domain(x);let y=s.data([b]).selectAll("path").data(w).enter().append("path").classed("nodePath",!0).attr("display",a=>a.depth?null:"none").attr("d",n).attr("fill",j).attr("opacity",1).attr("stroke","white").on("mouseover",v);o.on("click",function(){s.selectAll("path").on("mouseover",null),s.selectAll("path").transition().duration(1e3).attr("opacity",1).each("end",function(){g.select(this).on("mouseover",v)}),p.style("visibility","hidden"),r.style("visibility","hidden")}),l=y.node().__data__.value}):a=>{g.select(a).selectAll("*").remove()}},[a]);return(0,e.useEffect)(()=>{if(b)return k(b),(0,f.o)(b,()=>{k(b)})},[b,k]),d.j.jsx("div",{className:"sunburst-visualization-container",ref:c})}k.propTypes=d.R},9799:function(a,b,c){c.d(b,{o:function(){return f}});let d=new Map;function e(){d.size>0&&(d.forEach((a,b)=>{let c=b.getBoundingClientRect(),d=Math.round(10*c.width),e=Math.round(10*c.height);(a.width!==d||a.height!==e)&&(a.width=d,a.height=e,a.callback(b))}),setTimeout(e,100))}function f(a,b){if(a&&!d.has(a)){let c=0===d.size;return d.set(a,{callback:b}),c&&e(),()=>d.delete(a)}return()=>{}}}}])